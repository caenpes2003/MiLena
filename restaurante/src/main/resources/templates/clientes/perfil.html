<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title th:text="'Perfil de ' + ${cliente.nombreCompleto} + ' - Mi Leña'">
      Perfil del Cliente - Mi Leña
    </title>
    <link rel="icon" th:href="@{/assets/favicon.png}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" th:href="@{/css/custom.css}" />
  </head>
  <body>
    <nav th:replace="~{fragments/navbar :: navbar}"></nav>

    <main class="site-main">
      <section class="py-5 bg-dark bg-pattern text-white">
        <div class="container-xl">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <!-- Encabezado -->
              <div
                class="d-flex justify-content-between align-items-center mb-4"
              >
                <div>
                  <h2
                    class="text-acento mb-1"
                    th:text="${cliente.nombreCompleto}"
                  >
                    Nombre Cliente
                  </h2>
                  <p class="text-white-75 mb-0">
                    Cliente desde
                    <span
                      th:text="${#temporals.format(cliente.fechaRegistro, 'MMMM yyyy')}"
                      >enero 2024</span
                    >
                  </p>
                </div>
                <div>
                  <span
                    th:if="${cliente.activo}"
                    class="badge bg-success fs-6 px-3 py-2"
                  >
                    <i class="bi bi-check-circle"></i> Activo
                  </span>
                  <span
                    th:unless="${cliente.activo}"
                    class="badge bg-danger fs-6 px-3 py-2"
                  >
                    <i class="bi bi-x-circle"></i> Inactivo
                  </span>
                </div>
              </div>

              <!-- Información del cliente -->
              <div class="card-ml p-4 mb-4">
                <h4 class="text-primario mb-3">
                  <i class="bi bi-person-circle"></i>
                  Información Personal
                </h4>

                <div class="row g-3">
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >Nombre</label
                    >
                    <p class="mb-0" th:text="${cliente.nombre}">Juan</p>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >Apellido</label
                    >
                    <p class="mb-0" th:text="${cliente.apellido}">Pérez</p>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >Email</label
                    >
                    <p class="mb-0">
                      <a
                        th:href="'mailto:' + ${cliente.email}"
                        class="text-white text-decoration-none"
                        th:text="${cliente.email}"
                        >email@ejemplo.com</a
                      >
                    </p>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >Teléfono</label
                    >
                    <p class="mb-0">
                      <a
                        th:href="'tel:' + ${cliente.telefono}"
                        class="text-white text-decoration-none"
                        th:text="${cliente.telefono}"
                        >300123456</a
                      >
                    </p>
                  </div>
                  <div class="col-12">
                    <label class="form-label fw-semibold text-muted"
                      >Dirección</label
                    >
                    <p class="mb-0" th:text="${cliente.direccion}">
                      Calle 123 #45-67
                    </p>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >Fecha de Registro</label
                    >
                    <p
                      class="mb-0"
                      th:text="${#temporals.format(cliente.fechaRegistro, 'dd/MM/yyyy HH:mm')}"
                    >
                      01/01/2024 12:00
                    </p>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label fw-semibold text-muted"
                      >ID Cliente</label
                    >
                    <p class="mb-0 font-monospace">
                      #<span th:text="${cliente.id}">001</span>
                    </p>
                  </div>
                </div>
              </div>

              <!-- Historial de pedidos (placeholder) -->
              <div class="card-ml p-4 mb-4">
                <h4 class="text-primario mb-3">
                  <i class="bi bi-clock-history"></i>
                  Historial de Pedidos
                </h4>
                <div class="text-center py-4 text-muted">
                  <i class="bi bi-receipt fs-1 d-block mb-2"></i>
                  <p>Funcionalidad de pedidos en desarrollo</p>
                  <small
                    >Aquí se mostrarán los pedidos realizados por este
                    cliente</small
                  >
                </div>
              </div>

              <!-- Acciones -->
              <div class="d-flex gap-3 justify-content-between">
                <a th:href="@{/clientes}" class="btn btn-outline-secondary">
                  <i class="bi bi-arrow-left"></i> Volver a la lista
                </a>

                <div class="d-flex gap-2">
                  <!-- Activar/Desactivar -->
                  <form
                    th:if="${cliente.activo}"
                    th:action="@{/clientes/desactivar/{id}(id=${cliente.id})}"
                    method="post"
                    style="display: inline"
                    onsubmit="return confirm('¿Está seguro de desactivar este cliente?')"
                  >
                    <button type="submit" class="btn btn-secondary">
                      <i class="bi bi-pause"></i> Desactivar
                    </button>
                  </form>

                  <form
                    th:unless="${cliente.activo}"
                    th:action="@{/clientes/activar/{id}(id=${cliente.id})}"
                    method="post"
                    style="display: inline"
                  >
                    <button type="submit" class="btn btn-success">
                      <i class="bi bi-play"></i> Activar
                    </button>
                  </form>

                  <!-- Eliminar -->
                  <form
                    th:action="@{/clientes/eliminar/{id}(id=${cliente.id})}"
                    method="post"
                    style="display: inline"
                    onsubmit="return confirm('¿Está seguro de eliminar permanentemente este cliente? Esta acción no se puede deshacer.')"
                  >
                    <button type="submit" class="btn btn-danger">
                      <i class="bi bi-trash"></i> Eliminar
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/main.js}"></script>
  </body>
</html>
