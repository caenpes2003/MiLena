<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mi Perfil — Mi Leña</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" th:href="@{/css/custom.css}" />
  </head>
  <body>
    <nav th:replace="~{fragments/navbar :: navbar}"></nav>

    <main class="site-main">
      <section class="py-5 bg-dark bg-pattern text-white">
        <div class="container-xl">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <!-- Encabezado -->
              <div class="text-center mb-4">
                <h1 class="display-5 fw-bold text-acento mb-3 text-shadow">
                  <i class="bi bi-person-circle me-2"></i>Mi Perfil
                </h1>
                <p class="text-white-75 fs-5">Gestiona tu información personal</p>
              </div>

              <!-- Alertas -->
              <div
                th:if="${success}"
                class="alert alert-success alert-dismissible fade show"
                role="alert"
              >
                <i class="bi bi-check-circle"></i>
                <span th:text="${success}"></span>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                ></button>
              </div>
              <div
                th:if="${error}"
                class="alert alert-danger alert-dismissible fade show"
                role="alert"
              >
                <i class="bi bi-exclamation-triangle"></i>
                <span th:text="${error}"></span>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="alert"
                ></button>
              </div>

              <!-- Información del perfil -->
              <div class="card-ml p-4 mb-4">
                <div class="row">
                  <div class="col-md-8">
                    <div class="border-bottom border-3 border-primary pb-2 mb-4">
                      <h3 class="text-primario fw-bold mb-0 d-flex align-items-center">
                        <i class="bi bi-person-circle me-2 fs-2"></i>
                        <span class="text-shadow">Información Personal</span>
                      </h3>
                    </div>
                    <form
                      th:action="@{/perfil}"
                      method="post"
                      th:object="${cliente}"
                      novalidate
                    >
                      <div class="row g-3">
                        <!-- Nombre -->
                        <div class="col-md-6">
                          <label for="nombre" class="form-label fw-semibold"
                            >Nombre</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="nombre"
                            th:field="*{nombre}"
                            th:class="${#fields.hasErrors('nombre')} ? 'form-control is-invalid' : 'form-control'"
                            required
                          />
                          <div
                            class="invalid-feedback"
                            th:if="${#fields.hasErrors('nombre')}"
                            th:errors="*{nombre}"
                          >
                            Error
                          </div>
                        </div>

                        <!-- Apellido -->
                        <div class="col-md-6">
                          <label for="apellido" class="form-label fw-semibold"
                            >Apellido</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="apellido"
                            th:field="*{apellido}"
                            th:class="${#fields.hasErrors('apellido')} ? 'form-control is-invalid' : 'form-control'"
                            required
                          />
                          <div
                            class="invalid-feedback"
                            th:if="${#fields.hasErrors('apellido')}"
                            th:errors="*{apellido}"
                          >
                            Error
                          </div>
                        </div>

                        <!-- Email -->
                        <div class="col-md-6">
                          <label for="email" class="form-label fw-semibold"
                            >Email</label
                          >
                          <input
                            type="email"
                            class="form-control"
                            id="email"
                            th:field="*{email}"
                            th:class="${#fields.hasErrors('email')} ? 'form-control is-invalid' : 'form-control'"
                            required
                          />
                          <div
                            class="invalid-feedback"
                            th:if="${#fields.hasErrors('email')}"
                            th:errors="*{email}"
                          >
                            Error
                          </div>
                        </div>

                        <!-- Teléfono -->
                        <div class="col-md-6">
                          <label for="telefono" class="form-label fw-semibold"
                            >Teléfono</label
                          >
                          <input
                            type="tel"
                            class="form-control"
                            id="telefono"
                            th:field="*{telefono}"
                            th:class="${#fields.hasErrors('telefono')} ? 'form-control is-invalid' : 'form-control'"
                            required
                          />
                          <div
                            class="invalid-feedback"
                            th:if="${#fields.hasErrors('telefono')}"
                            th:errors="*{telefono}"
                          >
                            Error
                          </div>
                        </div>

                        <!-- Dirección -->
                        <div class="col-12">
                          <label for="direccion" class="form-label fw-semibold"
                            >Dirección</label
                          >
                          <textarea
                            class="form-control"
                            id="direccion"
                            th:field="*{direccion}"
                            rows="2"
                            th:class="${#fields.hasErrors('direccion')} ? 'form-control is-invalid' : 'form-control'"
                            required
                          ></textarea>
                          <div
                            class="invalid-feedback"
                            th:if="${#fields.hasErrors('direccion')}"
                            th:errors="*{direccion}"
                          >
                            Error
                          </div>
                        </div>
                      </div>

                      <div class="d-flex gap-3 justify-content-end mt-4">
                        <a th:href="@{/}" class="btn btn-outline-secondary"
                          >Cancelar</a
                        >
                        <button type="submit" class="btn btn-success">
                          <i class="bi bi-check-lg"></i> Actualizar perfil
                        </button>
                      </div>
                    </form>
                  </div>

                  <div class="col-md-4">
                    <div class="bg-primary bg-opacity-10 p-3 rounded">
                      <h4 class="text-acento fw-bold mb-3 border-bottom border-2 border-warning pb-2">
                        <i class="bi bi-shield-check me-2"></i>Estado de la cuenta
                      </h4>
                      <p class="mb-2">
                        <i class="bi bi-person-check text-success"></i>
                        Cliente verificado
                      </p>
                      <p class="mb-2">
                        <i class="bi bi-calendar-event text-info"></i>
                        Miembro desde
                        <strong
                          th:text="${#temporals.format(cliente.fechaRegistro, 'MMMM yyyy')}"
                          >enero 2024</strong
                        >
                      </p>
                      <p class="mb-0">
                        <i class="bi bi-hash text-warning"></i>
                        ID:
                        <span class="font-monospace" th:text="${cliente.id}"
                          >#001</span
                        >
                      </p>
                    </div>

                    <div class="mt-3">
                      <a
                        th:href="@{/logout}"
                        class="btn btn-outline-danger w-100"
                      >
                        <i class="bi bi-box-arrow-right"></i> Cerrar sesión
                      </a>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Historial de pedidos (placeholder) -->
              <div class="card-ml p-4">
                <div class="border-bottom border-3 border-primary pb-2 mb-4">
                  <h3 class="text-primario fw-bold mb-0 d-flex align-items-center">
                    <i class="bi bi-receipt me-2 fs-2"></i>
                    <span class="text-shadow">Mis Pedidos</span>
                  </h3>
                </div>
                <div class="text-center py-4 text-muted">
                  <i class="bi bi-clock-history fs-1 d-block mb-2"></i>
                  <p>Funcionalidad de pedidos en desarrollo</p>
                  <small
                    >Aquí podrás ver el historial de tus pedidos y su
                    estado</small
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/main.js}"></script>
  </body>
</html>
